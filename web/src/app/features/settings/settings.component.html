<div class="flex flex-col gap-6 animate-in fade-in duration-500">
  <!-- Flow Canvas Section -->
  <div
    class="bg-white rounded-xl shadow-sm border border-syn-color-neutral-200 overflow-hidden flex flex-col"
    style="height: calc(100vh - 200px)"
  >
    <!-- Toolbar -->
    <div class="border-b border-syn-color-neutral-200 bg-syn-color-neutral-50 flex-shrink-0">
      <div class="flex items-center justify-between px-4 py-3">
        <div class="flex gap-2">
          <syn-button
            variant="outline"
            size="small"
            (click)="onExportConfig()"
            [disabled]="isExporting()"
            [loading]="isExporting()"
          >
            <syn-icon slot="prefix" name="download"></syn-icon>Export
          </syn-button>
          <syn-button
            variant="outline"
            size="small"
            [loading]="isImporting()"
            [disabled]="isExporting()"
            (click)="onImportConfigClick()"
          >
            <syn-icon slot="prefix" name="upload"></syn-icon>Import
          </syn-button>
          <syn-button variant="outline" size="small" (click)="onReloadConfig()">
            <syn-icon slot="prefix" name="save"></syn-icon>Save & Reload
          </syn-button>

          @if (isSystemRunning()) {
            <syn-button variant="filled" color="danger" size="small" (click)="onStopSystem()">
              <syn-icon slot="prefix" name="stop"></syn-icon>Stop Data Flow
            </syn-button>
          } @else {
            <syn-button variant="filled" color="success" size="small" (click)="onStartSystem()">
              <syn-icon slot="prefix" name="play_arrow"></syn-icon>Start Data Flow
            </syn-button>
          }
        </div>
      </div>
    </div>

    <!-- Flow Canvas -->
    <div class="flex-1 overflow-hidden">
      <app-flow-canvas (hasUnsavedChangesChange)="hasUnsavedChanges.set($event)" />
    </div>
  </div>

  <!-- Configuration Import Validation Dialog -->
  <app-config-import-dialog
    [open]="showValidationDialog()"
    [validationResult]="validationResult()"
    [isImporting]="isImporting()"
    [(mergeMode)]="importMergeMode"
    (cancel)="onCancelImport()"
    (confirm)="onConfirmImport()"
    (requestClose)="onCancelImport()"
  />
</div>
